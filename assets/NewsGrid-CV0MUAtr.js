import{h as f,j as i,s as S,B as v,a as P,g as M,i as T,d as E,u as U,b as A,C as _,D}from"./index-CkmKULss.js";import{NewsCard as B}from"./NewsCard-h8c07mOZ.js";import{G as N}from"./Grid-RZc5sDAf.js";import"./CardContent-C5a_cJdU.js";const C="...",G=({totalItems:s,itemsPerPage:o,currentPage:t,siblingCount:e=1})=>f.useMemo(()=>{const a=Math.ceil(s/o);if(e+5>=a)return Array.from({length:a},(d,l)=>({type:"page",value:l+1,isActive:Number(l+1)===Number(t)}));const p=Math.max(t-e,1),m=Math.min(t+e,a),n=p>2,u=m<a-1,x=1,y=a;if(!n&&u){const d=3+2*e;return[...Array.from({length:d},(I,r)=>({type:"page",value:r+1,isActive:Number(r+1)===Number(t)})),{type:"ellipsis",value:C},{type:"page",value:y}]}if(n&&!u){const d=3+2*e,l=Array.from({length:d},(I,r)=>({type:"page",value:a-d+r+1,isActive:Number(a-d+r+1)===Number(t)}));return[{type:"page",value:x},{type:"ellipsis",value:C},...l]}const g=Array.from({length:m-p+1},(d,l)=>({type:"page",value:p+l,isActive:Number(p+l)===Number(t)}));return[{type:"page",value:x},{type:"ellipsis",value:C},...g,{type:"ellipsis",value:C},{type:"page",value:y}]},[s,o,t,e]),L=S(v)({display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem",marginTop:"2rem"}),R=S(P)(({theme:s})=>({minWidth:"40px",height:"40px",padding:"0",color:s.palette.primary.main,borderColor:s.palette.primary.main,borderRadius:0,"&.active":{backgroundColor:s.palette.primary.main,color:"#fff","&:hover":{backgroundColor:s.palette.primary.dark}},"&:hover":{borderColor:s.palette.primary.dark,backgroundColor:"rgba(20, 41, 52, 0.04)"}})),$=S(v)(({theme:s})=>({display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",color:s.palette.primary.main})),O=({totalItems:s,itemsPerPage:o,currentPage:t,onPageChange:e,siblingCount:w=1})=>{const a=G({totalItems:s,itemsPerPage:o,currentPage:t,siblingCount:w});if(t===0||a.length<2)return null;const j=()=>{e(t+1)},p=()=>{e(t-1)},m=a[a.length-1].value;return i.jsxs(L,{children:[i.jsx(R,{variant:"outlined",onClick:p,disabled:t===1,children:"<"}),a.map((n,u)=>n.type==="ellipsis"?i.jsx($,{children:n.value},`ellipsis-${u}`):i.jsx(R,{variant:"outlined",onClick:()=>e(n.value),className:n.type==="page"&&"isActive"in n&&n.isActive?"active":"",children:n.value},n.value)),i.jsx(R,{variant:"outlined",onClick:j,disabled:t===m,children:">"})]})},k=s=>{const[o,t,e]=s.split(".");return new Date(parseInt(e),parseInt(t)-1,parseInt(o))},z=()=>{const s=M(),[o,t]=T(),{data:e,loading:w}=E("news"),[a,j]=f.useState([]),[p,m]=f.useState(1),n=f.useRef(null),u=U(),x=A(u.breakpoints.down("sm")),y=A(u.breakpoints.down("md")),g=x||y?4:6;f.useEffect(()=>{if(e!=null&&e.news){const h=[...e.news].sort((c,b)=>k(b.date).getTime()-k(c.date).getTime()).map(c=>({...c,imageUrl:Array.isArray(c.imageUrl)?c.imageUrl[0]:c.imageUrl,onClick:()=>s(`/news/${c.id}`)}));j(h)}},[e,s]),f.useEffect(()=>{const r=parseInt(o.get("page")||"1",10),h=Math.max(1,Math.ceil(a.length/g)),c=isNaN(r)?1:Math.min(Math.max(r,1),h);if(c!==p&&m(c),!o.get("page")){const b=new URLSearchParams(o);b.set("page",String(c)),t(b)}},[o,t,a.length,g]);const d=r=>{m(r);const h=new URLSearchParams(o);h.set("page",String(r)),t(h),(x||y)&&n.current&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},l=(p-1)*g,I=a.slice(l,l+g);return w?i.jsx(v,{sx:{display:"flex",justifyContent:"center",py:4,width:"100%"},children:i.jsx(_,{})}):i.jsxs(v,{sx:{width:"100%"},children:[i.jsx(D,{ref:n,title:`${e==null?void 0:e.newsTitle}`,search:!1}),i.jsx(N,{container:!0,spacing:{xs:3,sm:4,md:5},sx:{mb:{xs:3,sm:4,md:5}},children:I.map((r,h)=>i.jsx(N,{item:!0,xs:12,sm:6,sx:{mb:{xxs:2,xs:0}},component:"div",children:i.jsx(B,{...r})},r.id))}),i.jsx(v,{sx:{display:"flex",justifyContent:"center",mt:{xs:2,sm:3,md:4}},children:i.jsx(O,{totalItems:a.length,itemsPerPage:g,currentPage:p,onPageChange:d,siblingCount:x?0:1})})]})};export{z as NewsGrid};
